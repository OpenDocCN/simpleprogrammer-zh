# 解释什么是动作和功能

> 原文：<https://simpleprogrammer.com/explaining-what-action-and-func-are/>

在 C#中，Action 和 Func 是减少代码重复和耦合的非常有用的工具。

遗憾的是，许多开发人员回避它们，因为他们并不真正理解它们。

向工具箱中添加 Action 和 Func 是改进 C#代码的一个非常重要的步骤。

理解它们做什么以及如何使用它们并不困难，只需要一点耐心…

另外，在你开始学习任何新技能或概念之前，我建议你看一下我的课程[“快速学习任何东西的 10 个步骤”。](https://simpleprogrammer.com/store/products/learn-anything-quickly/)T3】

## 思考行动的简单方法<>

我们大多数人都非常熟悉寻找重复代码的部分，将代码提取到一个方法中，并让该方法接受参数来表示差异。

这里有一个小例子，看起来应该很熟悉:

这些方法中的每一种都做着几乎相同的事情。这里唯一的区别是蔬菜的种类和蒸的时间。

一种简单而常见重构方法是重构代码:

好多了，现在我们不用用 3 种不同的方法重复“动作”。

现在让我们想象我们想要做的不仅仅是蒸汽。我们需要会炒或烤蔬菜。我们如何做到这一点？

也许我们将不得不添加一些新的方法来做到这一点。所以我们最终会得到这样的结果:

嗯，又是很多重复。没问题。让我们像对待第一组方法一样，做一个 *CookVegetable* 方法。因为我们总是先清洗，然后烹饪，然后上菜，所以我们应该能够传递我们将使用的烹饪方法。

哦，等等，我们该怎么做？我们不能只提取出*烤*或者*炒*或者*蒸*，因为*烤*、*炒*和*蒸*的方法是逻辑而不是数据。

除非……除非我们能把它们变成数据。我们能做到吗？

我们当然可以，看看这个:

除了这次我们参数化方法调用而不是数据之外，我们用和第一次重构时一样的方法去掉了重复的代码。

如果你理解了这一点，你就理解了行动。动作只是一种将方法视为数据的方式。现在，您可以将所有的公共逻辑提取到一个方法中，并传递发生变化的数据和动作。

**恭喜你，你不用创建抽象基类和巨大的继承树就可以做策略模式了！**

所以当你看到动作时，只要想“啊，这意味着我把一个方法作为数据传递。”

真的就这么简单。

Action <vegetable cookingtime="">翻译成英文就是:“一个以蔬菜和烹饪时间为参数，返回 void 的方法。”</vegetable>

## Func <>怎么样？

如果你理解 Action，你就理解 Func。

Func <x y="" z="">翻译成英文就是:“一个以一个 X，和一个 Y 为参数，返回一个 Z 的方法”。"</x>

Action 和 Func 的唯一区别是 Func 的最后一个模板参数是返回类型。Funcs 有非 void 返回值。

**Bonus:** 谓词是一个 Func，它总是返回一个布尔值。

这就是全部了。为了开始使用 Action 和 Func，真的没有必要知道比这更多的东西。

## 行动和职能的进一步资源

如果你对应用 Action 和 Func 的其他方法感兴趣，这里有一些我写的关于它们的帖子。

*   拉下开关:是狂欢的时候了
*   [像忍者一样解析栏目](https://simpleprogrammer.com/2010/06/30/parsing-columns-like-a-ninja/)
*   [Func 的力量< >](https://simpleprogrammer.com/2010/06/18/the-power-of-func/)
*   [超级组合:地图+功能指针](https://simpleprogrammer.com/2010/02/25/super-combo-map-function-pointer/)