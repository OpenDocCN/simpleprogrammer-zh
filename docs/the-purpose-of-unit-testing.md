# 单元测试的目的

> 原文：<https://simpleprogrammer.com/the-purpose-of-unit-testing/>

在你开始学习任何新技能或概念之前，我建议你看一下我的课程[“快速学习任何东西的 10 个步骤”。](https://simpleprogrammer.com/store/products/learn-anything-quickly/)T3】

昨天有人提醒我，仍然有许多人仍然没有真正理解单元测试的目的。

在过去 5 年左右的时间里，发生了一个有趣的转变。

大约 5 年前，当我在创建代码时建议 TDD 或者仅仅做一些单元测试时，我会得到可怕的回应。许多开发人员和管理人员不理解为什么单元测试很重要，认为这只是额外的工作。

最近，当我听到人们谈论单元测试时，几乎每个人都同意单元测试是一个好主意，但不是因为他们理解为什么，而是因为它现在是编程界所期望的。

没有理解的进步只是朝着一个随机的方向前进。



![purpose of unit testing](img/b1011f111152c5ca13b91e6e6b0a624f.png "trashtime")



## 回归基础

单元测试根本不是测试。

单元测试，尤其是测试驱动开发，是一种设计或实现活动，而不是测试活动。

您可以从单元测试中获得两个主要的好处，第一个好处占了大部分价值:

1.  引导您的设计松散耦合，并充分充实。如果进行测试驱动的开发，它将你写的代码限制在需要的范围内，并帮助你逐步发展这些代码。
2.  为重构和代码的小改动提供快速的自动化回归。

我不是说这就是所有的价值，但这是最重要的两个。

(单元测试也给你关于系统的小部分如何工作的活文档。)

单元测试强迫你实际使用你正在创建的类，如果类太大并且包含不止一个责任，单元测试就会惩罚你。

通过这种痛苦，您可以将您的设计变得更加内聚和松散耦合。

您考虑了您的类可能面临的更多场景，并确定了这些场景的行为，这推动了您的类的设计和完整性。

完成后，您会得到一些自动化测试，这些测试不能确保系统正常工作，但是可以确保功能不会改变。

事实上，大部分的价值在于创建代码时创建单元测试的行为。这是为什么在代码写完之后再回头写单元测试没有意义的主要原因之一。

## 有缺陷的想法

这里有一些不好的禁忌，表明你不理解单元测试:

*   您是在代码编写之后编写单元测试，而不是在代码编写期间或之前。
*   你让别人为你的代码编写单元测试。
*   您正在编写集成或系统测试，并将它们称为单元测试，只是因为它们直接调用代码中的方法。
*   你让 QA 编写单元测试，因为它们毕竟是测试。

单元测试需要写很多东西。如果你想用单元测试覆盖一个完整的系统，并且有足够的代码覆盖率，那么你就要做大量的工作。

如果你没有得到单元测试的第一个主要价值，即改进你的设计，你就是在浪费大量的时间和金钱来编写单元测试。

老实说，你认为拿一堆你已经写的或别人写的代码，让每个人都开始为它写单元测试会有什么效果？

你认为仅仅通过增加单元测试，甚至不改变代码，就能神奇地改进代码吗？

也许你认为回归的价值如此之高，以至于这种成本是值得的？

我不是说不要在遗留代码中添加单元测试。我想说的是，当你向遗留代码添加单元测试时，你最好从中获得价值，因为这是一项艰苦的工作，需要花费很多时间。

当你接触遗留代码时，重构代码并使用单元测试来指导重构的设计。

不要假设单元测试是神奇的。



![unicornMAGIC](img/53e3ad16dfeaabb9e88afd9823a8b63f.png "unicornMAGIC")



单元测试就像帮助你直截了当的指南。在你已经砍了木头之后，试图给一个文字工作项目添加指导方针是荒谬的。