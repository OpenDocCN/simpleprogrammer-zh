# 吴镇男·贝利是一位信息大师

> 原文:[https://simple programmer . com/derick-Bailey-is-a-messaging-master/](https://simpleprogrammer.com/derick-bailey-is-a-messaging-master/)

吴镇男·贝利是我的好朋友。你可能从 Entreprogrammers 播客中认识他，或者如果你听过【T2 起床编码】，他已经作为我的嘉宾出现过几次。

吴镇男的职业是软件开发员。他还是一名企业家，推出了许多著名的产品和服务。他是广受欢迎的木偶. js 框架的创建者。

许多(如果不是大多数的话)软件开发人员使用消息传递，但并不真正知道他们正在使用它。我认为邀请一位客座专家来谈论消息传递和消息队列是一个好主意。这是一个就这个话题采访吴镇男的好机会。他从 90 年代后期开始成为一名专业软件开发人员，从 80 年代后期开始编写代码。这些年来，他一直从事消息传递模式方面的工作，并乐于与大家分享他的知识。

请点击查看吴镇男的[视频采访。下面是我让他在网站上分享的关于 RabbitMQ 和其他消息队列的 Q & A。](https://www.youtube.com/watch?v=TTanHeqy2jQ)

## 什么是 RabbitMQ？我为什么要用它？

RabbitMQ 是一个消息代理和消息排队系统。它允许您编写单独的应用程序，并让它们在彼此不直接了解的情况下相互通信。你给 RabbitMQ 发消息；它将它们放入一个队列中(基于您的设置和配置)；另一个代码从队列中获取消息，运行该代码并处理消息。

## 好吧，RabbitMQ 是关于信息传递的。那么有什么好处呢？

![Derick Bailey is the creator of the Mrionette.js framework. He also runs WatchMeCode.net](img/b57ed72cdef5cc73bba538ddfd2e6550.png)

吴镇男·贝利是 JavaScript 专家。他管理着 WatchMeCode.net，并且是流行的木偶. js 框架的创建者。

消息传递有很多好处，包括分离的应用程序和系统设计。您可以相对容易地用新部件替换系统的部件。您可以使用多种编程语言，如 C#、Java、Node.js、PHP、ruby 等等，所有这些语言都与 RabbitMQ(或任何其他消息服务器)进行通信。您也可以使用它来集成遗留系统。容错内置于您的系统中，在某些情况下，您可以减少 web 请求的响应时间。

还有其他好处，但这是我注意到的主要好处。

## RabbitMQ 如何减少 HTTP 请求处理程序的响应时间？

与其在 web 服务器中编写复杂而耗时的代码，迫使用户等待旋转的缓冲区 GIF，不如让后端代码在出现问题时崩溃，然后在问题解决后重试。由于用户不知道后端代码，他们不关心任何东西坏了。网络服务器仍然工作。然后修复后端代码并重新处理消息。

## 有使用 RabbitMQ 的具体例子吗？

最简单的例子之一是从网络服务器发送电子邮件。假设您的网站上有一个联系表单。有人填写了它，并希望它会通过电子邮件发送给你。不是让 web 服务器直接发送电子邮件，而是向 RabbitMQ 发布一条消息。一些其他的代码获取该消息并发送电子邮件。

网络服务器可以非常迅速地回应用户，并说，“嘿，我发送了你想发送的电子邮件…一切都很好！”同时，在后端，发送电子邮件的代码位于另一个进程的某个地方。它可以检查 SMTP 服务器是否启动。格式化电子邮件需要时间。它甚至可以处理 SMTP 服务器关闭，并稍后重试电子邮件发送。用户也不用再等了。用户被告知电子邮件已经发送…一旦后端代码拥有了它所需要的一切，它就会被发送。

## 您提到了“其他”消息队列。外面还有什么？

有许多消息服务器和服务可用。一些我至少熟悉的名字包括:

*   消息中间件
*   泽姆 q
*   消息中间件
*   消息队列
*   亚马逊的 SQS
*   Azure 服务总线

还有其他的，但这些是我能马上说出名字的。您还可以使用 Redis 之类的东西作为基本的发布/订阅服务，模拟排队。

## Redis 作为队列？这和 RabbitMQ 相比如何？

使用 Redis 作为队列，您可以通过 ruby 的“resque”或 node.js 的“kue”等工具获得基本的发布/订阅功能。这些库将提供先进先出的消息排序，就像适当的消息队列和代理一样。

使用 Redis 和 RabbitMQ 之类的工具的主要区别是拥有一个自己动手的工具包，而不是具有更精细特性集的专用工具。

想象一下，去一家五金店购买橱柜的设计图，然后购买预切割的木材，以及一些你想要放在橱柜中的额外物品和附件。这个管用。太棒了。它还能让你用一些剩余的木头搭建一个小板凳。这是排队的 Redis 版本。

现在去专门的橱柜专卖店。在这家店里，他们有你自己永远也做不出来的橱柜风格。他们需要更多的木工工作和知识，非常专业的工具，有时需要一组人来建造这些橱柜。你可以在这家商店买到一些非常别致、非常灵活、非常漂亮的橱柜。但是您不必自己构建它们。你只需告诉商店你需要什么，他们就会进行配置和制造。这就是 rabbit MQ——专门构建的、可扩展的、功能丰富的，并且提供用自己动手的方法无法完成的服务。

## 其他队列呢，比如 ZeroMQ？RabbitMQ 与此相比如何？

默认情况下，ZeroMQ 是一个无代理的排队系统。你可以把它想象成点对点的消息传递，你必须了解另一端的系统。这也类似于 AJAX 请求在 web 上的工作方式。网络浏览器知道该网站。当浏览器发出 AJAX 请求时，它会将请求发送到站点的特定 URL。ZeroMQ 的工作方式类似。中间没有代理来处理消息分发。

另一方面，RabbitMQ 是一个消息代理。它让你有两个或更多的系统互相交谈，而根本不需要了解对方。每个系统都需要了解 RabbitMQ，但仅此而已。这具有将系统彼此解耦的优点。他们根本不了解对方，但还是可以交流的。

经纪人 vs 无经纪人无论如何都不是“好的 vs 坏的”。它们都是有效且有价值的信息传递方式。它们各有利弊。个人比较喜欢经纪模式。

## 有了所有的灵活性和优势，消息传递是不是一把金锤把一切都变成了钉子？

肯定不是！世界上没有金锤或灵丹妙药。

排队的好处也有坏处。通过创建一个使用消息传递的解耦应用程序系统，您失去了直接的代码流。现在，您必须查看消息传递模式，以了解事情是如何工作的，这可能会令人困惑。管理和监控工具也能有所帮助。

但在很多情况下，RabbitMQ 或消息传递只是一个坏主意。例如，如果您的网站需要从数据库中读取数据，那么这对于 RabbitMQ 来说可能是一个糟糕的地方。当然，您可以使用请求/响应模式来使它工作…但是如果 web 服务器被允许连接到数据库，那么就直接去那里。

有时候让 RabbitMQ 参与数据库工作确实有意义。但有时不会。这是一个很大的灰色区域，可能会很复杂。

## 学习这些复杂的灰色地带有什么好方法？

互联网上有很多学习 RabbitMQ 和消息传递的资源。当您开始使用 RabbitMQ 和构建系统时，您将开始通过反复试验了解事情是如何工作的。但是我建议投资这些资源:

*   [*企业集成模式*](http://www.amazon.com/Enterprise-Integration-Patterns-Designing-Deploying/dp/0321200683/)——关于消息传递模式的书
*   [*RabbitMQ 在行动*](http://www.amazon.com/RabbitMQ-Action-Distributed-Messaging-Everyone/dp/1935182978/)——一本学习基础知识和用作 RabbitMQ 参考的好书
*   RabbitMQ 教程——在 RabbitMQ.com，这些基础教程将向你展示一些常见的模式
*   [My RabbitMQ For Developers package](http://rabbitmq4devs.com/)–截屏、电子书和专家访谈，帮助您快速使用 rabbit MQ 和 node.js

## 好了，最后一个问题:为什么约翰·桑梅兹这么帅？

…真的吗？:D 航空公司