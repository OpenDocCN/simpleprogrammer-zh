# 带动作的面向方面编程<>

> 原文:[https://simple programmer . com/aspect-oriented-programming-by-action/](https://simpleprogrammer.com/aspect-oriented-programming-with-action/)

面向方面编程是一个非常好的概念。

尽管实现起来有点困难。

老实说，我不认为我真的见过它被成功实施。我的意思是，当然，我已经看到了如何将它用于像日志这样的“交叉”问题的例子。

问题是它通常很难使用，我能想到的唯一真正的实际应用是日志记录。我知道，这可能只是因为我缺乏这方面的知识，但是如果你耐心听我说，我将向你展示一个巧妙的小技巧，你可以通过做一些类似于 AOP 使用 Action <>所做的事情来解决横切关注点。

## 把它们都放在一个地方

AOP 试图解决的主要问题是将存在于许多不同地方的软件的各个方面集中到一个地方供您维护。

异常处理和日志记录往往是这些横切关注点中最臭名昭著的。毫无疑问，在你的代码中，有很多地方你会发现一个异常，你唯一能做的就是记录它。

我将通过动作<>向你展示一个简单的方法。

表扬应该表扬的地方，我从我的一个同事 Subha Tarafdar 写的一些代码中得到这个想法。(他是个天才。)

他写了一些代码，基本上完成了我将要向您展示的任务，但是是重试数据库查询。他能够减少代码库中的许多地方，在这些地方，当出现死锁或超时时，我们会重复执行数据库查询的逻辑。

## 这个代码是你的吗？

请忽略我在这里捕获的是一个一般性异常。这是一种不好的做法，但有时你所要做的就是记录下发生的任何不好的事情，然后继续前进。

在 try 块中做一些事情，然后捕捉到一个异常并记录下来，这是很常见的。

想想这段代码或类似的代码会在你的代码库中出现多少次。

## 行动<>救援

如果你不熟悉动作<>看一看[这篇文章](https://simpleprogrammer.com/2010/09/24/explaining-what-action-and-func-are/)我做了一个非常简单的解释它是如何工作的。

我们可以将 try、catch 和 log 异常的逻辑放入一个方法中，该方法只随我们所做的操作而变化。

我不太喜欢静态方法，但是在某些情况下它们是有意义的。另一种方法是将所有这些代码分散在您的代码库中。

现在我们有了这个方法，我们可以做任何我们想做的事情，并且知道如果有一个错误，它将被记录。

看看这个:

如果您决定要更改记录错误的方式或对错误采取的措施，您可以在一个地方进行更改。

## 不仅仅是为了伐木

您可以在代码库中有横切关注点的许多地方应用这种解决方案。

以下是一些建议，供您考虑这种解决方案:

*   失败逻辑重试
*   为失败使用替代服务(web 服务“A”失败了，但是我们可以使用 web 服务“B”)
*   数据库连接和连接关闭逻辑。(打开连接，做点什么，关闭连接。)