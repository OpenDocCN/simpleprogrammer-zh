# 起床编码 39:Fitbit 采访巴瑞·伯顿

> 原文：<https://simpleprogrammer.com/get-code-39-interview-barry-burton-fitbit/>

我一直想采访一个来自 Fitbit 的关于起床和编码的人，现在 Iris 和我终于有机会了。

在《起床并编码》这一集里，我们采访了巴瑞·伯顿 Fitbit 的移动工程师主管。

Barry 与我们分享了 Fitbit 移动应用程序如何工作的一些细节，并告诉 use 为什么蓝牙如此困难。

看看下面这一集。

[http://media.signalleaf.com/player/Get-Up-And-CODE/52ea85675d4ba10200000006/](http://media.signalleaf.com/player/Get-Up-And-CODE/52ea85675d4ba10200000006/)

[http://media.signalleaf.com/player/Get-Up-And-CODE/52ea85675d4ba10200000006/](http://media.signalleaf.com/player/Get-Up-And-CODE/52ea85675d4ba10200000006/)

完整文本:

[显示](javascript:void(0))

**约翰:**欢迎起床编码。今天节目中我们还有一位嘉宾。这将会是非常精彩的一集。这是我一直期待的一集。我一直想和 Fitbit 的人谈谈，因为我们总是在这个节目中谈论 Fitbit。

我们邀请到了巴瑞·伯顿，他是 Fitbit 的移动工程主管。他负责 Fitbit 的移动应用。如果你们对你们的移动应用单元有问题，现在你们知道该找谁了。欢迎来到这个节目，巴里。请简单介绍一下您自己和您的角色。

是的，当然，谢谢你邀请我。我已经在 Fitbit 工作了两年半，我开始着手开发我们的移动应用程序。我直接参与了 iOS 应用程序，并对娱乐进行了一点管理。我们正在努力为用户收集更多的数据，比如让我们的硬件设备与我们的网站保持同步，然后找出新的方法来可视化这些数据并向用户展示，让用户从他们的数据中获得自己的见解，并找到方法让我们为他们找到见解。

约翰:好的，太棒了。现在，我想谈论 Fitbit 是什么可能有点意义。现在大多数人都听说过 Fitbit。这很有趣。我们只是在谈论几年前 Fitbit 是一家多么小的公司。现在，它就像每个人都知道 Fitbit 一样巨大。每个商店都有，但是，是的，你想谈谈 Fitbit 到底是什么吗？

虹膜:当然可以。我想，从更普遍的意义上来说，我们的可穿戴传感器设备有一个无线组件，可以将数据从您的设备上获取并传输到我们的云后端。我们有一个 Wi-Fi 秤，但我们可能不太为人所知，但我们的主要产品是一个活动跟踪器，它使用 3D 加速度计来跟踪你的脚步和你行进的距离，以及你燃烧的卡路里。我们的一些模型也有一个高度计，所以你可以跟踪你爬了多少层。它是关于帮助你只看实际数据你运动了多少，作为一种鼓励你多运动的方式，而不是专注于锻炼作为一个特定的时间，你去 30 分钟，做一些只是在你的日常生活中更活跃的事情。另一个很大的部分是我们的排行榜，它可以看到你的朋友正在采取的步骤，许多人最终与他们的朋友竞争，看谁可以在过去 7 天内采取最多的步骤。

约翰:是的。

**虹膜:**或追。就像追一样。你把这个给一个朋友或者某个可能从多一点的锻炼中受益的人。然后你就加我为好友，开始反复唠叨他们。确实有效。我试过了。

约翰:真有趣。

Iris: 我必须问，因为这是我非常非常想知道的一件事。如何测试 Fitbit 和应用程序？你喜欢动手测试吗？你如何测试它？你一定要跑上跑下楼梯吗？你是怎么做到的？

巴里:是的。在很大程度上，测试整个系统没有捷径可走。我们只需要都戴上设备。所有的员工都在测试，当他们推出一款具有新功能的新设备时，我们都会使用几周或几个月，看看效果如何。我们可以在组件上做很多小测试，但是就整个系统而言，没有捷径可走。

约翰:是的。那很有趣。

巴里:有趣的是，员工们经常开着好几台设备。

约翰:真有趣。

艾瑞斯:哦，对不起。去吧，约翰。

**John:** 我本来想说当我写我的手机 app，我喜欢跑步的 app，这个追踪你步伐的小 app 的时候，我记得除了去外面跑步之外没有别的办法测试。我把我的安卓手机插上电源，进入调试器，然后我想，“好吧，我需要弄清楚当我达到一定的速度时它是否会发出警报，所以我必须出去跑步。”我会跑啊跑，然后回来，用这些物理设备，就好像你必须这样测试它。

艾瑞斯:嗯，你总是可以找到一个必须进行实践训练的学生。嘿，你想亲自动手。没有比这更实际的了。我猜想，如果一个开发人员注册了一份工作，并在 Fitbit 得到了一份工作，他们可能并没有看到这一点。在雇人之前，你做任何健康测试吗？

巴里:不，我认为我们是一家相当普通的工程公司。我们有各种健康水平的人。不过，在很大程度上，需要做的测试并不是什么超级积极的健身活动。真的，我们的产品只是追踪你在日常生活中有多活跃。

约翰:现在，有一件事我一直想知道。你有一个 iOS 应用和一个 Android 应用，对吗？

**巴里:**正确。

约翰:你有 Windows phones 7 吗？

Barry: 没有。我们有很多用户希望看到这一点，这是我们正在密切关注的事情。到目前为止，市场份额数据还不太清楚，我们的规模仍然很小，而且只是-

Iris: 有一些 API，Fitbit 不是有吗？

Barry: 他们已经初步推出了蓝牙 API，如果你说的是这个的话。

虹膜:我有一个模糊的记忆。我可能完全错了，但我相信我在 Telerik 的一位前同事 Michael Crump 是一位出色的 Windows phone 开发人员，我只是认为他实际上制作了一个适用于 Fitbit 的应用程序，但我不能 100%确定。我可能记得。

Barry: 商店里有几个应用程序可以使用我们的 API。

艾瑞斯:是的，没错。是啊。

Barry: 会给你看你的大部分数据。缺少的是一个可以将你的硬件设备同步到网站的应用程序。与任何移动平台的蓝牙集成都是一个挑战。

约翰:哦，是的。

巴里:我们已经看过两次了。我们已经开始调查了。

约翰:你用什么来建造？让我们来看一些应用程序。很好奇背后的技术。您的 iOS 应用程序是否仅使用本机 Objective-C 来构建，您正在使用哪种工具？

**巴里:**正确。这几乎是一个简单的 iOS 应用程序，Objective-C 使用了一些

Iris: 我感受到了你的痛苦。

Barry:Android 应用程序都是 Java，用普通的方式制作的。我们并没有在他们之间分享很多源代码。

约翰:是的。我想-

**虹膜:**算法。这些是嵌入到组件本身中的，还是在代码中完成的？

**Barry:** 这些设备本身运行大量代码，这些代码只是用来获取来自传感器的连续实时数据流，并对其进行处理，对其进行信号模式分析，以基本上弄清楚服务器上发生了什么。之后做一点后期处理。至于移动应用程序，它们大多只是显示已经可用的数据。

约翰:那么，这个魔法呢？嗯，我记得我有第一个 Fitbit，最初的那个，对，我必须把它和我电脑上的小文件同步，这还不错。还可以。然后我买了一个新的，Fitbit Flex 那个小小的东西。当它与我的手机同步时，我就想，“什么？刚才那里发生了什么？”太疯狂了。我甚至不在电脑旁边，它怎么能和安卓手机同步呢？我没结对什么的，对吧？我想我没有配对，或者可能有…我不记得了，但是…

Barry: 它使用的是蓝牙低能耗技术，这种技术大约在两年前才开始应用于消费产品。这是蓝牙 4.0 规范的一部分，但是除了它们都使用 2.4 GHz 的事实之外，低能耗部分真的与常规蓝牙完全无关。蓝牙低能耗更像是一种服务模式，您可以拥有提供服务的服务，然后客户端可以查找并使用这些服务，因此您不必像传统蓝牙那样进行配对。

因为我们处理它的方式是我们自己在蓝牙低能量层上做所有的安全工作，所以任何人都可以和你的设备说话并从中获取数据。它会被加密，只能由我们的服务器解密。这就是我们提供安全保障的方式。你会得到非常好的无缝体验。这是您将设备与我们的后端配对的第一步，一旦我们的服务器知道哪个设备是您的，我们就可以从您的应用程序无缝同步它。

约翰:是的。那真是太酷了。真是太神奇了。这一点我想我甚至没有在营销材料中看到。当我得到这个东西时，我没有意识到它是自动的——配对不是一个巨大的痛苦，但配对蓝牙设备可能是一个痛苦。那真是太酷了。我就想，“这到底是怎么神奇地发生的？它怎么知道这是我的设备？”我喜欢这样。

巴里:酷。

**Iris:** 这是用户高度要求的一个功能吗，只需将它与他们的手机同步即可？

巴里:是的。回到 2、3 年前，当我们拥有 classic 和 Ultra checkers 时，这是一个非常常见的功能，要求能够同步它们，以及那些没有带着笔记本电脑或任何东西旅行的人，他们远离家乡，没有办法同步他们的设备。当时我们使用的是 ANT 无线协议。它类似于蓝牙低能耗但专有的协议，几乎没有任何移动设备支持它。amp 和 PTLE 的重要之处在于，它让我们可以使用它们，因为它们的功耗非常低。这是因为微型设备获得一周或更长的电池寿命是非常困难的，但这对于保持其可用性也非常重要。你不想每天晚上都要充电吧。

约翰:对，没错。开发这些产品的最大挑战是什么？让我感到好奇的一件事是，这些应用程序并不是最简单的应用程序，我的意思是它们也不是最复杂的应用程序，但是你用 Objective-C 和 Java 编写了两个代码库，就像你说的，你不能共享代码。这是怎么回事？这很痛苦吗？你的团队是怎么划分的？

Barry :是的，我的意思是我们有两个非常专注的平台团队。我们发现 Android 和 iPhone 的框架和 UI 套件非常不同。要真正擅长其中任何一个，你必须专注于一个，但我们确实围绕功能和设计以及更高层次的东西分享了很多想法，然后每个团队或多或少地自己实现它。我的意思是，我们仍然有能力谈论解决问题，我们需要使用的算法，策略和所有这些东西。

Iris: 开发团队有多大？

Barry: 我们有大约 10 名 iOS 开发者和大约 8 名 Android 开发者。

**虹膜:**哇。为什么要花两个多小时？

Barry: 嗯，我们目前正在努力发展两个团队。从历史上看，我们在 Android 应用程序之前 6 个月就开始使用 iPhone 应用程序，所以在增长和构建新功能方面总是有一点领先，所以我们经常会利用这种大小差异，首先在 iPhone 上构建一个功能，然后一旦我们想通了，就在 Android 上构建它，这样会花费更少的时间。

约翰:有道理。你们有没有看过 Xamarin 工具在一个代码库中构建它或者共享代码？

**Barry:** 是的，我认为蓝牙和数据通信的水平对我们来说总是非常棘手的事情，因为所有的移动平台 Android 和 iPhone 都有大量的蓝牙问题，所以我们必须不断确保我们正在开发最新的版本。当测试版在 Android 和 iPhone 平台上发布时，我们必须在它们公开之前立即使用它们。在需要更新的地方插入任何第三方工具包都不是我们能做的事情。

约翰:有道理。我想，如果新版本的手机操作系统推出，或者有更新，然后他们的 Fitbit 停止工作，人们会非常生气。

巴里:对。

**John:** 因为现在人们依赖于——我的意思是，我想以前人们与他们的桌面同步是不同的，但现在人们依赖于它与他们的手机一起工作。这是一件大事。

**Barry:** 对，我的意思是，我们在应用程序方面处于一个有点独特的位置，因为我们不是免费或花 2 美元购买的东西，而是有人花了很多钱购买这种硬件设备，他们希望它可靠并能工作。

约翰:是啊，有道理。你们在开发这个应用时遇到的最大挑战是什么？是因为蓝牙还是其他什么？

Barry: 不，蓝牙是目前最大的挑战。它非常分散，我们不得不在不同的设备上使用不同的库，即使是不同设备上的相同库，我们也会发现非常不同的行为。这是大量的逆向工程，只是工作和迭代，使事情的工作。这并不容易。

约翰:虽然是逆向工程的东西，但还是挺有趣的。这是一次令人紧张但有益的经历，对吗？因为当你最终想明白的时候，你会说，“是的！”

**Iris:** 你自己用 Fitbit 吗？

巴里:是的，我喜欢。我现在已经有第四个了。

艾瑞斯:他在展示他戴着的证据。你另一只手上也戴着吗？

巴里:现在不行。

Iris: 你有没有注意到戴上它对你运动水平的影响？

**Barry:** 毫无疑问，公司里的领导班子很容易让人上瘾，而且有很大的同辈压力，要求他们更加活跃，取得更多进展。毫无疑问，我们都认识公司里不同的人。有一个阶层，你知道很少有人在最后一周总是超过 100，000 步。你最终会和你身边的人一起走同样多的步数。我个人更倾向于 70，000 英镑的范围，所以你只是在和那些与你更相似的人对接职位。

约翰:有道理。真有趣。我喜欢这个排行榜的一点是，你可以知道什么时候有人去了迪斯尼世界。就像是，“这个周末你带你的孩子去迪士尼乐园了吗？”“是啊，是啊。”好吧，我看得出来。

**Iris:** 这个世界毕竟不小。那么 Fitbit 的下一步是什么？

巴里:嗯，我的意思是我们有一个研究部门，他们一直在研究新的传感器和原型材料，只是想知道我们下一步可以做什么。我认为我们几乎是任何类型的传感器，我们可以将其放入一个不显眼的小包装中，具有良好的电池寿命，可以为您的个人健康或健身提供有用的反馈。我们现在有很多没有做，主要是因为有很多心脏问题，所以看看我们做了什么会很有趣。不幸的是，现在我还没有明确的消息可以告诉你。

**虹膜:**拍摄。我希望有一些秘密。我有穿洞的习惯，所以我想问，有没有皮下植入的计划？

巴里:不是马上，不，但是我的意思是那很有趣。我们肯定就此进行过讨论。

**虹膜:**像在臀部上的永久植入物。那是安装计步器最准确的地方吗？

巴里:是的，非常喜欢。臀部安装的计步器或多或少是精确的。一旦你开始把它戴在手腕上，它就方便多了，但是仅仅移动你的手就会产生很多噪音，而这些噪音并不在你的臀部。

约翰:的确如此。当我做饭的时候，我倾向于在步骤上做得很好，尤其是当我搅拌的时候。

Iris: 问题是它是否应该被计算，因为你消耗了更多的能量。例如，如果你站在家里，因为洗完衣服而叠衣服。你没有四处走动，但也绝对没有坐着不动。我不知道。如果你真的能把动作转化成步数，也许这并不太糟糕，因为步数不仅仅是衡量的标准。这也取决于手的动作，但是是的。

约翰:好的，你想为 Fitbit 做些什么或者你正在做的有趣的事情吗？你的下一步是什么？

Barry :我的意思是我们有很多新功能想添加到我们的移动应用中。就社交互动而言，我们只是触及了领导者论坛和信息传递的皮毛。在那里我们可以做更多的事情。围绕数据可视化，我们还想做更多有趣的事情。我感兴趣的一件事是可用于移动平台的数据可视化工具的状态。当你看到 web 和 Java 脚本时，有很多非常棒的库，但是当你只看到原生 Java 或 Objective-C 时，就没有太多了，大部分都是静态的，没有什么交互性。

约翰:的确如此。

Barry :所以我认为在这些触摸屏用户界面环境中有很多事情可以做，以实现真正吸引人的图形和交互。

约翰:太棒了，太酷了。我当然希望能够更容易地处理我的数据，并且能够更好地回顾那些与我生活其他方面相关的数据。好吧，谢谢你上节目。在我结束之前，我要记住我们的赞助商，因为我们爱我们的赞助商。SignalLeaf 是我们的赞助商，赞助我们的播客，招待我们。如果你去 SignalLeaf 的，你可以注册，你可以创建你自己的播客，SignalLeaf 让它变得非常简单。他们有一些真正负担得起的计划和真正最好的技术来创建播客，并有很多关于如何做到这一点的指导。开始一个播客不是最容易的事情。因此，如果你感兴趣，我们需要更多的开发者播客，请访问 signalleaf.com。

我们想再次感谢巴里来到这个节目。和你谈话很愉快。

巴里:谢谢你。

约翰:下周我们会和大家谈谈。别忘了在 getupandcode.com 关注我们，在推特上关注我们。我们可以利用的一件事是 iTunes 上的几个评级。如果你有机会，只要打开 iTunes，给我们一个诚实的评价。我们真的，真的很感激，所以更多的人可以找到这个节目，并获得健康。保重，我们下周再和你谈。

Iris: 回见，拜拜。