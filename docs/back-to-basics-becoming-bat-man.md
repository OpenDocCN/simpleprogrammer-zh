# 回归基础:成为蝙蝠人

> 原文：<https://simpleprogrammer.com/back-to-basics-becoming-bat-man/>

在我关于黑盒自动化测试(BATs)和单元测试的[结论的“回归基础”帖子中，我说我们应该:](https://simpleprogrammer.com/2011/01/14/back-to-basics-unit-testing-automated-blackbox-testing-and-conclusions/)

> 花费你大部分的精力，所有你会花在编写单元测试上的时间，而不是写我称之为黑盒自动化测试或 BATs 的东西。

在这篇文章中，我将概述我认为一个团队从无蝙蝠到蝙蝠人(或蝙蝠女人)而不发疯需要什么。

我想采用一种实用的方法，从 0 黑盒自动化测试到构建一个可持续的开发 bat 的过程，作为将待办事项称为“完成”的验收标准的一个组成部分

## 让我为你画一幅画



![human-paint-brush](img/1675072697b2ec7670675ce9fea9010b.png "human-paint-brush")



我想为你描绘一幅我们从开始到结束寻求实现的最终目标的图画。

1.  为工作选择一个待办事项。
2.  开发人员、质量保证人员和产品负责人一起工作，清楚地定义验收标准，这将使积压能够被签署或称为“完成”
3.  QA 和开发人员一起将验收标准转化为 bat 的高级描述，创建 bat 是为了验证验收标准的各个方面。
4.  开发人员开始用这些高级 bat 进行编码(bat 驱动开发)，QA 开始开发 bat。
5.  当开发人员完成足够的功能来传递一个 BAT 而不破坏现有的 BAT 时，该功能将被签入主干。
6.  每次检入都会导致 bat 的整个电池被分割到多个虚拟机上，这些虚拟机在几分钟内运行数百小时的自动化测试。
7.  一旦待办事项清单的所有 bat 都通过了，待办事项清单就完成了，这些 bat 就成为了每个持续集成构建中运行的一系列测试的一部分。

我们应该记住这个简单的过程，并努力实现它，因为我们知道当我们能够实现这个过程时，我们将能够对我们系统的功能性和不可回归性充满信心。

先把你认为单元测试是正确的想法放在一边。抛开黑盒自动化测试太硬太脆弱的想法，想象一下软件开发的世界就像我上面画的图那样流动。

现在听好了，因为这部分很重要。med rectangle-4-multi-110 { border:none！重要；显示:屏蔽！重要；浮动:无！重要；行高:0；边距-底部:15px！重要；左边距:0！重要；右边距:0！重要；margin-top:15px！重要；最大宽度:100%！重要；最小高度:250px 最小宽度:250 像素；填充:0；文本对齐:居中！重要}

在你努力再写一个单元测试之前，在你把你的测试双笔浸入“模拟”的墨水池之前，确保你首先努力开发一个创建 bat 的过程。

## 价值主张

我们确实需要努力理解这里提出的价值主张。

我将使用一些真实的假数字来尝试并真正传达我认为很可能被忽略的这一重要观点。

首先考虑你做两件事所花的时间:

1.  创建基础结构以允许您的代码被隔离地进行单元测试。(依赖注入、接口等。)
2.  编写单元测试花费的时间。

在我们继续之前，我想重申一下。我并不主张完全废除单元测试的编写。参见我的[原始结论帖子](https://simpleprogrammer.com/2011/01/14/back-to-basics-unit-testing-automated-blackbox-testing-and-conclusions/)，或者我关于[无模拟单元测试的帖子](https://simpleprogrammer.com/2011/01/23/back-to-basics-unit-testing-without-mocks/)，以便更好地理解我对单元测试的主张。

所以回到我的观点。想想做这件事要花多少时间。为了正确地隔离和单元测试代码，大多数开发人员可能会估计，对于编写代码的每一个小时的工作来说，还有大约一两个小时的单元测试和单元测试准备时间。

单元测试比它们测试的代码花费更长的时间是有原因的；孤立地测试一行代码需要更多的代码行。

使用好的自动化框架开发的 bat 正好相反。虽然单元测试代码可能有 4 行单元测试代码对 1 行产品代码的比率，或者 4:1 的比率，但是 BAT 代码有一个完全相反的比率。很有可能 1 行 BAT 代码可以测试 20 行甚至更多的生产代码，1:20 的比例。(我从哪里得到这些数字？看看我的一些用单元测试和 bat 测试的真实产品代码。)

即使单元测试和 bat 在防止软件系统退化方面同样有效，并且在提供满足验收标准的绝对保证方面同样有效(我认为 bat 在这两方面都更有效)，你也可以很容易地看到，与在单元测试上投入时间相比，在 bat 上投入时间会获得更高的投资回报。

我不会轻率地或以理论的口吻做出这些声明。我有成功实现自动化框架来编写 bat 的真实经验，这些经验强化了这些结论。

## 怎么去那里

如果我已经完成了我的工作，你现在至少确信，让所有积压订单都有 BATs 是一个好目标，但如果你和我交谈过的大多数人一样，你会怀疑这样做的成本和可行性。

你需要的是一个好向导。如何做这件事的逐步指南。

我将结束“回到基础”的帖子，并继续进入一个新的系列，目标是提供一个逐步的指南来实现全自动黑盒测试。

让我们来看看我将在下一系列文章中涉及的步骤。

1.  **雇用自动化主管**–找到以前做过这项工作的人，或者找到这个职位的开发人员，这很重要。
2.  **决定底层浏览器驱动程序或浏览器自动化工具—**假设这里有 web 应用程序，有几个可供选择，WatiX、Selenium 等等。
3.  **设计自动化框架—**构建一个专门为测试中的应用程序定制的框架，将为测试应用程序创建一种有效的领域特定语言。
4.  **创建您的第一个冒烟测试—**构建一些冒烟测试将帮助您证明和构建您的框架，并首先为您提供最高价值的测试。
5.  **将冒烟测试添加到您的构建中—**冒烟测试作为构建的一部分运行，您可以立即看到价值。
6.  **将 bat 添加到您的验收标准中—**我们需要从这里慢慢开始，但最终要让所有积压工作都需要 bat 来满足每个验收标准。
7.  **横向扩展–**当您开始获得大量 bat 时，您将需要找到一种方法来虚拟化更多服务器并并行化测试运行，以便能够在短时间内运行所有 bat。
8.  **构建真正的 DSL—**一旦你走到这一步，可能是时候开始考虑创建一种特定领域的语言，甚至业务分析师也可以用它来编写测试。