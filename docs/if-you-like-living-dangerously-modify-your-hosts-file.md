# 如果你喜欢危险的生活，修改你的主机文件

> 原文：<https://simpleprogrammer.com/if-you-like-living-dangerously-modify-your-hosts-file/>

我越来越多地看到和听到它，每次看到它，我都会退缩。

> “嘿，我如何测试我们的 web 应用程序？”
> 
> “哦，修改你的主机文件，这样当你去 wonkywares.com 的时候，它就会转到 test.wonkwares.com 的 T2。”
> 
> “嗯……好，听起来很棒。”

## 这是在做什么

我要说的是转到 C:\ windows \ system32 \ drivers \ etc \ hosts，并向该文件添加将 ip 地址映射到主机名的条目。

hosts 文件基本上是 ip 地址到主机名的映射。

所以如果你输入一个条目，

207.46.0.87·google.com

在文件中，当你在浏览器中输入 google.com 时，你会转而去 bing.com。(这是 bing.com 的 ip 地址。)

为什么会有人这么做？

好吧，如果您有一些代码、自动化脚本或使用实际生产域名的过程，您可以修改您的 hosts 文件，以便生产主机名被解析为测试 ip 地址。

神奇的是，当你去 wonkywares.com 的时候，你会去 test.wonkywares.com 的 T2。

是的，我知道这看起来很酷很聪明。

见鬼，你可能已经停止阅读这个博客，并召开了一个紧急会议，这样你就可以告诉你团队中的每个人他们如何修改他们的 hosts 文件，以神奇地使你的生产脚本在测试中工作，而不用传入 url。

## 会出什么问题呢？

让我给你一个场景:

> “好的，Jeff，我将在我的新工作站上运行测试脚本，以确保一切正常运行。
> 
> " Joebob，你那些花里胡哨的测试脚本是怎么工作的？"
> 
> “Jeff，他们删除测试数据库中的所有数据，然后创建新的测试数据，运行测试，并在测试后再次清理数据。”
> 
> … Joebob 运行测试脚本，看着它们全部通过，想着自己有多棒多聪明。
> 
> 响…响…响…
> 
> “你好，我是乔博。”
> 
> “你好，Joebob，我是首席执行官 Wonky 先生，我收到报告称，我们的生产网站上根本没有展示任何产品。”
> 
> “哦，史尼基人！我一定是忘了修改我的 hosts 文件，将 wonkywares.com 指向 test.wonkywares.com。我针对生产运行了我的测试脚本。”
> 
> … Joebob 从他最下面的抽屉里拿出一把 wonkywares 左轮手枪，就在他为“计划日”保留的单一麦芽苏格兰威士忌旁边



![Don't let this happen to you](img/40560b3513eae9496c26d9c9b145ffda.png "Don't let this happen to you")



我相信你能猜到接下来会发生什么。

让我为你列出一些不好的事情，如果你聪明地修改你的主机文件，而不是参数化你的脚本或代码来获得一个可配置的 url。

*   您针对生产运行您的测试脚本，因为您忘记了在您的新机器上配置您的主机文件。
*   您认为您为了数据修复修改了一些生产数据，但是您实际上只修改了测试数据。
*   别人用你的机器，不知道你有修改过的主机文件。
*   您使用了其他人的机器，并且忘记了他们没有修改过的 hosts 文件，因此您认为您正在访问测试网站，但是您实际上是在修改实时生产数据。
*   作为轮换的一部分，您的 IT 人员会交换试运行和生产服务器的 IP 地址，以便他们可以对生产硬件进行维护。你现在指的是生产，而不是暂存，没有任何线索。
*   其他人试图运行您的脚本或代码，但不知道他们必须先修改他们的 hosts 文件。他们针对生产运行您的脚本。
*   您更改了 hosts 文件，并希望更改立即生效，但是您的浏览器很聪明，已经缓存了您刚刚访问的页面的 ip 地址。

我相信你能想出更多的理由。

因此，与其“自作聪明”地修改 hosts 文件，不如尝试让您正在编写的任何代码接受一个供 url 使用的参数，或者从配置文件中读取它。